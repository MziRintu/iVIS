<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test api</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>


</head>
<body>

<div class="testUsual">
    URL:
    <input id="path">
    <br/>
    <br/>
    HTTP Method:
    <select id = "typeMethod">
        <option>GET</option>
        <option>POST</option>
        <option>PUT</option>
    </select>
    <br/>
    <br/>
    JSON data (suitable also with GET)
    <br/>
    <textarea id="jsonInput" cols=50 rows=30></textarea>
    <br/>
    <br/>

    <button id="requestBtn" onclick="makeRequest();">Send request</button>
    <br/>
    <br/>
    Working with file section:
    <br/>
    <form id="formUpload" action="" method="post" enctype="multipart/form-data">
        <input type="file" name="file">
        <br/>
        <button id="attachBtn" onclick="attachFile();">Attach file</button>
        <br/>

    </form>
    <button id="downloadBtn" onclick="downloadFile();">Download file</button>
</div>


<script>
    function makeRequest() {
        var URL = $("#path").val();
        var typeMethod = $('#typeMethod').find(":selected").text();
        var $jsonInput = $('#jsonInput').val();
        var data = {};

        if ($jsonInput) {
            data = $.parseJSON($jsonInput);
        }

        if (typeMethod == 'POST' || typeMethod == 'PUT') {
            $.ajax({
                url: "/ivis" +URL,
                contentType: 'application/json; charset=utf-8',
                data: JSON.stringify(data),
                type: typeMethod,
                dataType: "json",
                cache: false,
                success: function (result) {
                    alert(JSON.stringify(result));
                }
            });
        } else {
            if ($jsonInput) {
                location.href = "/ivis" + URL + '?' + $.param(data)
            } else {
                location.href = "/ivis" + URL;
            }
        }


    }


    function attachFile() {
        var URL = $("#path").val();
        var typeMethod = $('#typeMethod').find(":selected").text().toLowerCase();

        var $form = $('#formUpload');
        $form.attr("action", URL);
        $form.attr("method", typeMethod);

        $form.submit();
    }

    function downloadFile() {
        var URL = $("#path").val();
        location.href = URL;
    }





</script>


</body>
</html>